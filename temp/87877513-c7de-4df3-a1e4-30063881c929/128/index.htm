<!DOCTYPE HTML><html><head>
<meta http-equiv="Content-Type" content="text/html; charset=unicode">
<title>vim全局替换命令</title>
    
<style id="wiz_custom_css">html, body {font-size: 12pt;}body {font-family: Helvetica, 'Hiragino Sans GB', '微软雅黑', 'Microsoft YaHei UI', SimSun, SimHei, arial, sans-serif;line-height: 1.6;margin: 0 auto;padding: 20px 16px;padding: 1.25rem 1rem;}h1, h2, h3, h4, h5, h6 {margin:20px 0 10px;margin:1.25rem 0 0.625rem;padding: 0;font-weight: bold;}h1 {font-size:20pt;font-size:1.67rem;}h2 {font-size:18pt;font-size:1.5rem;}h3 {font-size:15pt;font-size:1.25rem;}h4 {font-size:14pt;font-size:1.17rem;}h5 {font-size:12pt;font-size:1rem;}h6 {font-size:12pt;font-size:1rem;color: #777777;margin: 1rem 0;}div, p, ul, ol, dl, li {margin:0;}blockquote, table, pre, code {margin:8px 0;}ul, ol {padding-left:32px;padding-left:2rem;}ol.wiz-list-level1 > li {list-style-type:decimal;}ol.wiz-list-level2 > li {list-style-type:lower-latin;}ol.wiz-list-level3 > li {list-style-type:lower-roman;}blockquote {padding:0 12px;padding:0 0.75rem;}blockquote > :first-child {margin-top:0;}blockquote > :last-child {margin-bottom:0;}img {border:0;max-width:100%;height:auto !important;margin:2px 0;}table {border-collapse:collapse;border:1px solid #bbbbbb;}td, th {padding:4px 8px;border-collapse:collapse;border:1px solid #bbbbbb;min-height:28px;word-break:break-all;box-sizing: border-box;}.wiz-hide {display:none !important;}</style><style name="wiz_unsave_style">html, body {    font-size: 12pt;}body {    font-family: Helvetica, 'Hiragino Sans GB', 微软雅黑, 'Microsoft YaHei UI', SimSun, SimHei, arial, sans-serif;    line-height: 1.6;    color: inherit;    background-color: inherit;    margin: 0 auto;    padding: 20px 16px;    padding: 1.25rem 1rem;}img{    max-width: 100%;}</style><style name="wiz_style_for_load"></style><script type="text/javascript" src="file:///C:\Tools\WizNote\WizTools\htmleditor\utils.js" wiz_style="unsave" charset="utf-8"></script><script type="text/javascript" src="file:///C:\Tools\WizNote\WizTools\htmleditor\localize.js" wiz_style="unsave" charset="utf-8"></script><script type="text/javascript" src="file:///C:\Tools\WizNote\WizTools\htmleditor\core\wizEditorForPc.js" wiz_style="unsave" charset="utf-8"></script><script type="text/javascript" src="file:///C:\Tools\WizNote\WizTools\htmleditor\editorHelper.js" wiz_style="unsave" charset="utf-8"></script><script type="text/javascript" src="file:///C:\Users\peak\Documents\My Knowledge\templates\WizTemplate.js" wiz_style="unsave" charset="utf-8"></script></head>

<body spellcheck="false" class="" ><div></div><h1 class="postTitle" style="margin:20px 0px 10px;padding:0px;font-weight:bold;color:rgb(0, 0, 0);font-size:0.875rem;font-family:Verdana, Arial, Helvetica, sans-serif;font-style:normal;text-align:start;text-indent:0px;background-color:rgb(255, 255, 255);"><a id="cb_post_title_url" class="postTitle2" href="http://www.cnblogs.com/fakis/archive/2010/07/17/1976595.html" style="margin:0px;padding:0px;text-decoration:none;color:rgb(0, 0, 0);">vim全局替换命令</a></h1><div class="clear" style="margin:0px;padding:0px;color:rgb(0, 0, 0);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:0.813rem;font-style:normal;font-weight:normal;text-align:start;text-indent:0px;background-color:rgb(255, 255, 255);"></div><div class="postBody" style="margin:0px;padding:0px;color:rgb(17, 17, 17);font-size:0.813rem;font-family:Verdana, Arial, Helvetica, sans-serif;font-style:normal;font-weight:normal;text-align:start;text-indent:0px;background-color:rgb(255, 255, 255);"><div id="cnblogs_post_body" style="margin:0px 0px 20px;padding:0px;"><p style="margin:10px auto;padding:0px;text-indent:0px;">语法为 :[addr]s/源字符串/目的字符串/[option]<br style="margin:0px;padding:0px;">全局替换命令为：:%s/源字符串/目的字符串/g</p><div style="margin:0px;padding:0px;"><br style="margin:0px;padding:0px;"><b style="margin:0px;padding:0px;">[addr] 表示检索范围，省略时表示当前行。</b><br style="margin:0px;padding:0px;">如：“1，20” ：表示从第1行到20行；<br style="margin:0px;padding:0px;">“%” ：表示整个文件，同“1,$”；<br style="margin:0px;padding:0px;">“. ,$” ：从当前行到文件尾；<br style="margin:0px;padding:0px;">s : 表示替换操作</div><div style="margin:0px;padding:0px;"><br style="margin:0px;padding:0px;"><b style="margin:0px;padding:0px;">[option] :&nbsp;表示操作类型</b><br style="margin:0px;padding:0px;">如：g 表示全局替换;&nbsp;<br style="margin:0px;padding:0px;">c 表示进行确认<br style="margin:0px;padding:0px;">p 表示替代结果逐行显示（Ctrl + L恢复屏幕）；<br style="margin:0px;padding:0px;">省略option时仅对每行第一个匹配串进行替换；<br style="margin:0px;padding:0px;">如果在源字符串和目的字符串中出现特殊字符，需要用”\”转义</div><div style="margin:0px;padding:0px;"><br style="margin:0px;padding:0px;"><b style="margin:0px;padding:0px;">下面是一些例子：</b><br style="margin:0px;padding:0px;">#将That or this 换成 This or that<br style="margin:0px;padding:0px;">:%s/\(That\) or \(this\)/\u\2 or \l\1/<br style="margin:0px;padding:0px;">—-&nbsp;<br style="margin:0px;padding:0px;">#将句尾的child换成children<br style="margin:0px;padding:0px;">:%s/child\([ ,.;!:?]\)/children\1/g<br style="margin:0px;padding:0px;">—-<br style="margin:0px;padding:0px;">#将mgi/r/abox换成mgi/r/asquare<br style="margin:0px;padding:0px;">:g/mg\([ira]\)box/s//mg//my\1square/g&nbsp;&nbsp;&nbsp; &lt;=&gt;&nbsp; :g/mg[ira]box/s/box/square/g<br style="margin:0px;padding:0px;">—-<br style="margin:0px;padding:0px;">#将多个空格换成一个空格<br style="margin:0px;padding:0px;">:%s/&nbsp; */ /g<br style="margin:0px;padding:0px;">—-<br style="margin:0px;padding:0px;">#使用空格替换句号或者冒号后面的一个或者多个空格<br style="margin:0px;padding:0px;">:%s/\([:.]\)&nbsp; */\1 /g<br style="margin:0px;padding:0px;">—-<br style="margin:0px;padding:0px;">#删除所有空行<br style="margin:0px;padding:0px;">:g/^$/d<br style="margin:0px;padding:0px;">—-<br style="margin:0px;padding:0px;">#删除所有的空白行和空行<br style="margin:0px;padding:0px;">:g/^[ &nbsp;][ &nbsp;]*$/d<br style="margin:0px;padding:0px;">—-<br style="margin:0px;padding:0px;">#在每行的开始插入两个空白<br style="margin:0px;padding:0px;">:%s/^/&gt;&nbsp; /<br style="margin:0px;padding:0px;">—-<br style="margin:0px;padding:0px;">#在接下来的6行末尾加入.<br style="margin:0px;padding:0px;">:.,5/$/./<br style="margin:0px;padding:0px;">—-<br style="margin:0px;padding:0px;">#颠倒文件的行序<br style="margin:0px;padding:0px;">:g/.*/m0O&nbsp; &lt;=&gt; :g/^/m0O<br style="margin:0px;padding:0px;">—-<br style="margin:0px;padding:0px;">#寻找不是数字的开始行,并将其移到文件尾部<br style="margin:0px;padding:0px;">:g!/^[0-9]/m$ &lt;=&gt; g/^[^0-9]/m$<br style="margin:0px;padding:0px;">—-<br style="margin:0px;padding:0px;">#将文件的第12到17行内容复制10词放到当前文件的尾部<br style="margin:0px;padding:0px;">:1,10g/^/12,17t$<br style="margin:0px;padding:0px;">~~~~重复次数的作用<br style="margin:0px;padding:0px;">—-<br style="margin:0px;padding:0px;">#将chapter开始行下面的第二行的内容写道begin文件中<br style="margin:0px;padding:0px;">:g/^chapter/.+2w&gt;&gt;begin<br style="margin:0px;padding:0px;">—-<br style="margin:0px;padding:0px;">:/^part2/,/^part3/g/^chapter/.+2w&gt;&gt;begin<br style="margin:0px;padding:0px;">—-<br style="margin:0px;padding:0px;">:/^part2/,/^part3/g/^chapter/.+2w&gt;&gt;begin|+t$</div></div></div></body></html>